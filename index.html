<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>GÃ¼vercin PazarÄ± TR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#fff}
header{background:#020617;padding:15px;display:flex;justify-content:space-between;align-items:center}
header h1{color:#facc15;font-size:20px;margin:0}
nav button{margin-left:6px}
button{background:#facc15;border:none;padding:8px 12px;font-weight:bold;border-radius:4px;cursor:pointer}
input{width:100%;padding:8px;margin-bottom:6px}
.container{max-width:900px;margin:auto;padding:20px}
.card{background:#020617;padding:15px;border-radius:8px;margin-bottom:12px}
.small{color:#cbd5f5;font-size:14px}
.hidden{display:none}
img{width:100%;border-radius:6px;margin-bottom:8px}
.danger{background:#dc2626;color:#fff}
</style>
</head>
<body>

<header>
<h1>ğŸ•Šï¸ GÃ¼vercin PazarÄ± TR</h1>
<nav id="nav"></nav>
</header>

<div class="container">

<!-- HOME -->
<div id="home"></div>

<!-- PROFILE -->
<div id="profile" class="hidden"></div>

<!-- LOGIN -->
<div id="login" class="card hidden">
<h3>GiriÅŸ</h3>
<input id="loginUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="loginPass" type="password" placeholder="Åifre">
<button onclick="login()">GiriÅŸ Yap</button>
</div>

<!-- REGISTER -->
<div id="register" class="card hidden">
<h3>Ãœye Ol</h3>
<input id="regUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="regPass" type="password" placeholder="Åifre">
<button onclick="register()">Ãœye Ol</button>
</div>

</div>

<script>
let users=JSON.parse(localStorage.getItem("users"))||[];
let auctions=JSON.parse(localStorage.getItem("auctions"))||[];
let user=localStorage.getItem("user");

const home=document.getElementById("home");
const profile=document.getElementById("profile");
const nav=document.getElementById("nav");

function showHome(){profile.classList.add("hidden");home.classList.remove("hidden");renderHome()}
function showProfile(){home.classList.add("hidden");profile.classList.remove("hidden");renderProfile()}
function logout(){localStorage.removeItem("user");location.reload()}

function renderNav(){
nav.innerHTML="";
if(user){
nav.innerHTML=`
<button onclick="showHome()">Ana Sayfa</button>
<button onclick="showProfile()">Profilim</button>
<button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>`;
}else{
nav.innerHTML=`
<button onclick="toggle('login')">GiriÅŸ</button>
<button onclick="toggle('register')">Ãœye Ol</button>`;
}
}
renderNav();

function toggle(id){
document.getElementById("login").classList.add("hidden");
document.getElementById("register").classList.add("hidden");
document.getElementById(id).classList.toggle("hidden");
}

function register(){
const u=regUser.value,p=regPass.value;
if(!u||!p)return alert("Eksik bilgi");
if(users.find(x=>x.username===u))return alert("KullanÄ±cÄ± var");
users.push({username:u,password:p});
localStorage.setItem("users",JSON.stringify(users));
alert("Ãœyelik tamam");
}

function login(){
const u=loginUser.value,p=loginPass.value;
const f=users.find(x=>x.username===u&&x.password===p);
if(!f)return alert("HatalÄ±");
localStorage.setItem("user",u);
location.reload();
}

function addAuction(){
const name=document.getElementById("name").value;
const price=document.getElementById("price").value;
const file=document.getElementById("photo").files[0];
if(!name||!price||!file)return alert("Eksik");
const r=new FileReader();
r.onload=e=>{
auctions.push({id:Date.now(),name,price:Number(price),photo:e.target.result,owner:user,start:Date.now(),bids:[]});
localStorage.setItem("auctions",JSON.stringify(auctions));
renderHome();
};
r.readAsDataURL(file);
}

function bid(id){
if(!user)return alert("GiriÅŸ yapmalÄ±sÄ±n");
const a=auctions.find(x=>x.id===id);
if(Date.now()>a.start+86400000)return alert("Ä°hale bitti");
const amt=prompt("Teklif â‚º");
if(!amt)return;
a.bids.push({user,amount:Number(amt)});
a.price=Number(amt);
localStorage.setItem("auctions",JSON.stringify(auctions));
renderHome();
}

function renderHome(){
home.innerHTML=`
${user?`
<div class="card">
<h3>â• GÃ¼vercin Ekle</h3>
<input id="name" placeholder="GÃ¼vercin adÄ±">
<input id="price" type="number" placeholder="BaÅŸlangÄ±Ã§ â‚º">
<input id="photo" type="file" accept="image/*">
<button onclick="addAuction()">Ä°haleyi BaÅŸlat</button>
</div>`:""}
<h3>Ä°lanlar</h3>`;

auctions.forEach(a=>{
const end=a.start+86400000;
const ended=Date.now()>end;
const lastBid=a.bids[a.bids.length-1];
home.innerHTML+=`
<div class="card">
<img src="${a.photo}">
<b>${a.name}</b>
<p>ğŸ’° ${a.price} â‚º</p>
<p class="small">ğŸ‘¤ Son teklif: ${lastBid?lastBid.user:"Yok"}</p>
<p class="small">${ended?"â›” Ä°hale bitti":"â±ï¸ 24 saatlik ihale"}</p>
${!ended?`<button onclick="bid(${a.id})">Teklif Ver</button>`:""}
</div>`;
});
}
renderHome();

function renderProfile(){
let myAuctions=auctions.filter(a=>a.owner===user);
let wins=auctions.filter(a=>{
if(a.bids.length){
let top=a.bids.reduce((m,b)=>b.amount>m.amount?b:m);
return Date.now()>a.start+86400000 && top.user===user;
}
return false;
});

profile.innerHTML=`
<h2>ğŸ‘¤ ${user}</h2>

<h3>ğŸ•Šï¸ AÃ§tÄ±ÄŸÄ±m Ä°lanlar</h3>
${myAuctions.map(a=>`<div class="card">${a.name} - ${a.price} â‚º</div>`).join("")||"Yok"}

<h3>ğŸ† KazandÄ±klarÄ±m</h3>
${wins.map(a=>`<div class="card">${a.name} - ${a.price} â‚º</div>`).join("")||"Yok"}
`;
}
</script>

</body>
</html>
