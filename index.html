<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>GÃ¼vercin PazarÄ± TR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#0f172a;color:#fff}
header{background:#020617;padding:15px;display:flex;justify-content:space-between;align-items:center}
header h1{color:#facc15;font-size:20px;margin:0}
nav button{margin-left:6px}
button{background:#facc15;border:none;padding:8px 12px;font-weight:bold;border-radius:4px;cursor:pointer}
input{width:100%;padding:8px;margin-bottom:6px}
.container{max-width:900px;margin:auto;padding:20px}
.card{background:#020617;padding:15px;border-radius:8px;margin-bottom:12px}
.small{color:#cbd5f5;font-size:14px}
.hidden{display:none}
img{width:100%;border-radius:6px;margin-bottom:8px}
.danger{background:#dc2626;color:#fff}

/* ğŸ‘¤ Ä°LAN SAHÄ°BÄ° ETÄ°KETÄ° */
.image-box{position:relative}
.owner-badge{
  position:absolute;
  top:8px;
  left:8px;
  background:rgba(0,0,0,0.75);
  color:#facc15;
  padding:4px 8px;
  border-radius:6px;
  font-size:13px;
  font-weight:bold;
}
</style>
</head>
<body>

<header>
<h1>ğŸ•Šï¸ GÃ¼vercin PazarÄ± TR</h1>
<nav id="nav"></nav>
</header>

<div class="container">
<div id="home"></div>
<div id="profile" class="hidden"></div>

<div id="login" class="card hidden">
<h3>GiriÅŸ</h3>
<input id="loginUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="loginPass" type="password">
<button onclick="login()">GiriÅŸ Yap</button>
</div>

<div id="register" class="card hidden">
<h3>Ãœye Ol</h3>
<input id="regUser" placeholder="KullanÄ±cÄ± adÄ±">
<input id="regPass" type="password">
<button onclick="register()">Ãœye Ol</button>
</div>
</div>

<script>
let users=JSON.parse(localStorage.getItem("users"))||[];
let auctions=JSON.parse(localStorage.getItem("auctions"))||[];
let user=localStorage.getItem("user");

const home=document.getElementById("home");
const profile=document.getElementById("profile");
const nav=document.getElementById("nav");

function showHome(){profile.classList.add("hidden");home.classList.remove("hidden");renderHome()}
function showProfile(){home.classList.add("hidden");profile.classList.remove("hidden");renderProfile()}
function logout(){localStorage.removeItem("user");location.reload()}

function renderNav(){
nav.innerHTML=user?
`<button onclick="showHome()">Ana Sayfa</button>
 <button onclick="showProfile()">Profilim</button>
 <button onclick="logout()">Ã‡Ä±kÄ±ÅŸ</button>`
:
`<button onclick="toggle('login')">GiriÅŸ</button>
 <button onclick="toggle('register')">Ãœye Ol</button>`;
}
renderNav();

function toggle(id){
login.classList.add("hidden");
register.classList.add("hidden");
document.getElementById(id).classList.toggle("hidden");
}

function register(){
if(!regUser.value||!regPass.value)return alert("Eksik");
if(users.find(x=>x.username===regUser.value))return alert("Var");
users.push({username:regUser.value,password:regPass.value});
localStorage.setItem("users",JSON.stringify(users));
alert("Ãœyelik tamam");
}

function login(){
const f=users.find(x=>x.username===loginUser.value&&x.password===loginPass.value);
if(!f)return alert("HatalÄ±");
localStorage.setItem("user",loginUser.value);
location.reload();
}

function addAuction(){
const n=name.value,p=price.value,f=photo.files[0];
if(!n||!p||!f)return alert("Eksik");
const r=new FileReader();
r.onload=e=>{
auctions.push({
id:Date.now(),
name:n,
price:Number(p),
photo:e.target.result,
owner:user,
start:Date.now(),
bids:[]
});
localStorage.setItem("auctions",JSON.stringify(auctions));
renderHome();
};
r.readAsDataURL(f);
}

function bid(id){
if(!user)return alert("GiriÅŸ yap");
const a=auctions.find(x=>x.id===id);
if(Date.now()>a.start+86400000)return alert("Bitti");
const amt=prompt("Teklif â‚º");
if(!amt)return;
a.bids.push({user,amount:Number(amt)});
a.price=Number(amt);
localStorage.setItem("auctions",JSON.stringify(auctions));
renderHome();
}

function renderHome(){
home.innerHTML=`
${user?`
<div class="card">
<h3>â• GÃ¼vercin Ekle</h3>
<input id="name" placeholder="GÃ¼vercin adÄ±">
<input id="price" type="number" placeholder="BaÅŸlangÄ±Ã§ â‚º">
<input id="photo" type="file" accept="image/*">
<button onclick="addAuction()">Ä°haleyi BaÅŸlat</button>
</div>`:""}
<h3>Ä°lanlar</h3>`;

auctions.forEach(a=>{
const last=a.bids[a.bids.length-1];
home.innerHTML+=`
<div class="card">
<div class="image-box">
<span class="owner-badge">@${a.owner}</span>
<img src="${a.photo}">
</div>
<b>${a.name}</b>
<p>ğŸ’° ${a.price} â‚º</p>
<p class="small">ğŸ‘¤ Son teklif: ${last?last.user:"Yok"}</p>
${Date.now()<a.start+86400000?`<button onclick="bid(${a.id})">Teklif Ver</button>`:"â›” Ä°hale bitti"}
</div>`;
});
}
renderHome();

function renderProfile(){
let mine=auctions.filter(a=>a.owner===user);
profile.innerHTML=`
<h2>ğŸ‘¤ ${user}</h2>
<h3>AÃ§tÄ±ÄŸÄ±m Ä°lanlar</h3>
${mine.map(a=>`<div class="card">${a.name} - ${a.price} â‚º</div>`).join("")||"Yok"}
`;
}
</script>

</body>
</html>

