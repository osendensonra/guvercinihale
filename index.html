<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>İhale Sistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body class="bg-gray-100 p-4">

    <div id="home">
        <div class="bg-white p-6 rounded-xl shadow-lg border">
            <h1 class="text-xl font-bold text-blue-900 mb-4">GÜVERCİN İHALE</h1>
            <div class="border-b pb-4 mb-4">
                <p class="font-bold">Mavi Şebap</p>
                <p class="text-2xl font-black text-blue-700">1.500 TL</p>
            </div>
            <button onclick="git('login')" class="w-full bg-blue-800 text-white py-4 rounded-xl font-bold">TEKLİF VER / KAYIT OL</button>
        </div>
    </div>

    <div id="login" class="hidden">
        <div class="bg-white p-6 rounded-xl shadow-lg border">
            <h2 class="font-bold mb-4">Üye Bilgileri</h2>
            <input type="text" id="ad" placeholder="Ad Soyad" class="w-full border p-4 rounded-xl mb-3">
            <input type="tel" id="no" placeholder="Telefon" class="w-full border p-4 rounded-xl mb-4">
            <button onclick="kaydet()" id="btn" class="w-full bg-green-600 text-white py-4 rounded-xl font-bold">KAYDI TAMAMLA</button>
            <button onclick="git('home')" class="w-full mt-4 text-gray-400 text-sm">Geri Dön</button>
        </div>
    </div>

    <script>
        // BAĞLANTI AYARLARI
        const S_URL = 'https://zfhbbvnyceagummhcjis.supabase.co';
        const S_KEY = 'const supabaseKey = process.env.SUPABASE_KEY
const supabase = createClient(supabaseUrl, supabaseKey)'; // <--- Sadece burayı değiştir!
        
        const sb = supabase.createClient(S_URL, S_KEY);

        function git(id) {
            document.getElementById('home').style.display = (id === 'home' ? 'block' : 'none');
            document.getElementById('login').style.display = (id === 'login' ? 'block' : 'none');
        }

        async function kaydet() {
            const isim = document.getElementById('ad').value;
            const tel = document.getElementById('no').value;
            if(!isim || !tel) return alert("Boş bırakma!");

            document.getElementById('btn').innerText = "Yükleniyor...";
            
            const { error } = await sb.from('uyeler').insert([{ isim: isim, telefon: tel }]);

            if(error) {
                alert("Hata: " + error.message);
                document.getElementById('btn').innerText = "TEKRAR DENE";
            } else {
                alert("Başarılı! Kaydınız yapıldı.");
                git('home');
            }
        }
    </script>
</body>
</html>
