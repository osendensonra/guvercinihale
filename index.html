<div id="auth-modal" class="fixed inset-0 bg-black/50 hidden z-[100] flex items-center justify-center backdrop-blur-sm">
    <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden">
        <div class="flex border-b">
            <button onclick="switchTab('login')" id="login-tab" class="flex-1 py-4 font-bold text-blue-600 border-b-2 border-blue-600">Giriş Yap</button>
            <button onclick="switchTab('signup')" id="signup-tab" class="flex-1 py-4 font-bold text-gray-400 hover:text-gray-600">Kayıt Ol</button>
        </div>
        
        <div class="p-8">
            <form id="auth-form" onsubmit="handleAuth(event)">
                <div class="space-y-4">
                    <div id="name-field" class="hidden">
                        <label class="block text-sm font-medium text-gray-700">Ad Soyad</label>
                        <input type="text" class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">E-posta</label>
                        <input type="email" required class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" placeholder="ornek@mail.com">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Şifre</label>
                        <input type="password" required class="w-full mt-1 p-3 border rounded-xl focus:ring-2 focus:ring-blue-500 outline-none" placeholder="••••••••">
                    </div>
                    <button type="submit" id="auth-submit-btn" class="w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 transition-all">Giriş Yap</button>
                </div>
            </form>
            <button onclick="closeModal()" class="w-full mt-4 text-gray-400 text-sm hover:underline">Vazgeç</button>
        </div>
    </div>
</div>

<div id="user-area" class="flex items-center gap-4">
    <button onclick="openModal('login')" class="text-blue-600 font-bold text-sm border border-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50">Giriş Yap</button>
</div>

<script>
    let isLoggedIn = false;
    let currentUser = null;

    function openModal(tab) {
        document.getElementById('auth-modal').classList.remove('hidden');
        switchTab(tab);
    }

    function closeModal() {
        document.getElementById('auth-modal').classList.add('hidden');
    }

    function switchTab(tab) {
        const nameField = document.getElementById('name-field');
        const submitBtn = document.getElementById('auth-submit-btn');
        const loginTab = document.getElementById('login-tab');
        const signupTab = document.getElementById('signup-tab');

        if (tab === 'login') {
            nameField.classList.add('hidden');
            submitBtn.innerText = "Giriş Yap";
            loginTab.className = "flex-1 py-4 font-bold text-blue-600 border-b-2 border-blue-600";
            signupTab.className = "flex-1 py-4 font-bold text-gray-400 hover:text-gray-600";
        } else {
            nameField.classList.remove('hidden');
            submitBtn.innerText = "Hesap Oluştur";
            signupTab.className = "flex-1 py-4 font-bold text-blue-600 border-b-2 border-blue-600";
            loginTab.className = "flex-1 py-4 font-bold text-gray-400 hover:text-gray-600";
        }
    }

    function handleAuth(e) {
        e.preventDefault();
        // Simülasyon: Gerçekte burası Firebase veya API'ye bağlanacak
        isLoggedIn = true;
        currentUser = "osendensonra";
        
        document.getElementById('user-area').innerHTML = `
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 font-bold">O</div>
                <span class="font-semibold text-gray-700">${currentUser}</span>
            </div>
        `;
        closeModal();
        alert("Başarıyla giriş yapıldı!");
    }

    // Mevcut addBid fonksiyonunu güncelle (Giriş kontrolü ekle)
    const originalAddBid = addBid;
    addBid = function(amount) {
        if (!isLoggedIn) {
            alert("Teklif vermek için önce giriş yapmalısınız!");
            openModal('login');
            return;
        }
        originalAddBid(amount);
    };
</script>
